
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Le Dernier Secret dâ€™Auguste Le Du</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="theme-color" content="#d9c79a" />
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="header">
        <img src="assets/seal.png" alt="Sceau Auguste Le Du" />
        <div>
          <h1>Le Dernier Secret dâ€™Auguste Le Du</h1>
          <div id="step" class="step">Ã‰tape</div>
        </div>
      </div>
      <hr/>
      <p id="story"></p>
      <div id="lock" class="lock" style="display:none;"></div>

      <div class="codegate">
        <div id="codeMsg" class="small" style="margin-bottom:6px"></div>
        <input id="codeInput" type="text" inputmode="numeric" placeholder="â€¢â€¢â€¢â€¢" />
        <button id="codeBtn">Valider</button>
      </div>

      <div class="crosswrap"></div>
      <div class="cipher"></div>

      <div class="tools">
        <button id="scanBtn">ğŸ“· Scanner un QR (camÃ©ra)</button>
        <button id="uploadBtn">ğŸ–¼ï¸ Scanner depuis une photo</button>
        <button id="resetBtn" class="small">â†º RÃ©initialiser la progression</button>
      </div>

      <div class="videoWrap">
        <video id="video" playsinline></video>
        <div class="scanHint">Visez le QRâ€¦</div>
        <button id="stopBtn" class="small" style="margin-top:8px">ArrÃªter la camÃ©ra</button>
      </div>

      <div class="uploadWrap">
        <div class="small">Choisissez une photo nette du QR. Astuce : faites un gros plan bien Ã©clairÃ©.</div>
        <input id="fileInput" type="file" accept="image/*" />
      </div>

      <div class="footer">
        <span class="small">Scannez les QR dans lâ€™ordre. La progression est mÃ©morisÃ©e sur cet appareil.</span>
        <span class="small">Â© Auguste Le Du â€” 1921</span>
      </div>
    </div>
  </div>
  <script>
    const STEP_TEXTS = {"1": "Â« Bien le bonjour, Ã©tranger curieux !\nSi tu lis ces lignes, câ€™est que tu tâ€™es aventurÃ© sur mes terresâ€¦ et que tu comptes bien fouiller dans mes affaires.\n\nSache que jâ€™ai laissÃ© derriÃ¨re moi un trÃ©sorâ€¦ ou peut-Ãªtre une malÃ©dictionâ€¦ ou les deux.\nIl y a cent ans, jâ€™avais dÃ©jÃ  plus de secrets que de dents dans ma bouche â€” et encore, Ã  lâ€™Ã©poque, jâ€™en avais dÃ©jÃ  perdu la moitiÃ©.\n\nPour commencer, cherche la pierre qui porte le chiffre gravÃ© de mon annÃ©e la plus chÃ¨re. Sous ce regard de granit, tu trouveras le dÃ©but de ton voyage.\n\nMais attentionâ€¦ ce nâ€™est pas la pierre qui roule qui amasse la mousse. Â»", "2": "Â« Elle a nourri plus de ventres que le curÃ© nâ€™a donnÃ© de sermons !\nRegarde-la bien, mais sache que ce que tu cherches nâ€™est pas pour tes yeux seulsâ€¦\nCherche Ã  voir autrement, comme la chouette qui chasse sous la lune. Â»", "3": "Â« Ah, la vieille marmiteâ€¦ Combien de repas, combien de secrets aussiâ€¦\nLa doyenne du hameau y avait mÃªme perdu son dentier. On ne lâ€™a jamais retrouvÃ©, et si tu croques dedans, tu comprendras pourquoi on a arrÃªtÃ© la soupe.\n\nÃ€ prÃ©sent, cherche lâ€™endroit oÃ¹ la vie commenceâ€¦ protÃ©gÃ©e par une coquille. Â»", "4": "Â« Mes dames Ã  plumes nâ€™aiment pas les inconnus, alors ne traÃ®ne pas trop.\nLes couleurs te parlent, mais pas comme Ã  lâ€™arc-en-ciel.\nCompte-lesâ€¦ multiplie-lesâ€¦ et ajoute mille.\n\nLe chiffre final ouvrira ta prochaine porte. Â»", "5": "Â« Ahâ€¦ tu as trouvÃ© ma source secrÃ¨te, oubliÃ©e de beaucoup.\nÃ€ prÃ©sent, fais lâ€™inverse : cherche un endroit secâ€¦ oÃ¹ les calories dorment Ã  lâ€™abri de la pluie. Â»", "6": "Â« Lâ€™odeur du bois secâ€¦ presque aussi bonne que celle du pain chaud.\nRemplis la grille, et observe les lettres qui se tiennent bien droites : elles te rÃ©vÃ©leront un objet que jâ€™ai toujours gardÃ© prÃ¨s de moi.\n\nEnsuiteâ€¦ trouve cet objet. Â»", "7": "Â« VoilÃ  ma vieille canneâ€¦ Elle mâ€™a soutenu dans les champs comme dans les chemins de traverse.\nDÃ©crypte la phrase codÃ©e et tu dÃ©couvriras le nom du jeu oÃ¹ les pierres sont reines.\nSi tu Ã©chouesâ€¦ CÃ©sar te jettera aux lions. Â»", "8": "Â« Assieds-toi donc sur mon fauteuil minÃ©ralâ€¦ moins confortable quâ€™un coussin, mais plus durable.\nDerriÃ¨re mon trÃ´ne, tu as trouvÃ© un morceau de vÃ©ritÃ©â€¦ et une Ã©nigme qui te fera lever les yeuxâ€¦ et peut-Ãªtre les pieds. Â»", "9": "Â« Tu veux monter haut ? Alors trouve la chaleur sans feu, celle qui fait lever sans braiseâ€¦\n\nDerriÃ¨re, ton destin tâ€™attend. Â»", "10": "Â« Ahâ€¦ le vieux four. Combien de miches, combien de tartesâ€¦ et combien de secrets a-t-il cuits en silence ?\nCherche Ã  gauche de lâ€™entrÃ©e un petit recoin, lÃ  oÃ¹ nul cadenas ne ferme la voie.\n\nDans ses entrailles froides, une pierre pas comme les autresâ€¦ Ce que tu trouveras ouvrira le dernier secret. Â»", "11": "Â« Bravo ! Tu as trouvÃ© lâ€™emplacement du trÃ©sor.\n\nPour compliquer la tÃ¢che aux suivants, laisse Ã  cet endroit un indice diffÃ©rentâ€¦\nPuis cache lâ€™emplacement du trÃ©sor ailleurs, avec ce carnet et un crayon, pour que le prochain fasse de mÃªme. Â»\n\n(Texte Ã  imprimer et poser Ã  cÃ´tÃ© du QR :\nSi tu lis ces lignes, câ€™est que tu es bien prÃ¨sâ€¦ ou peut-Ãªtre trop tard.\nScanne le QR code final pour obtenir lâ€™emplacement du trÃ©sor.\nEt si ce QR code nâ€™est plus lÃ â€¦ câ€™est quâ€™un autre tâ€™a devancÃ©.\nÃ€ partir de maintenantâ€¦ je ne suis plus maÃ®tre de cette aventure.)", "12": "Â« Bravo ! Tu as trouvÃ© lâ€™emplacement du trÃ©sor.\nMarque ta victoireâ€¦ et prÃ©pare le terrain pour le prochain aventurier. Â»"};
  </script>
  <script src="app.js"></script>
</body>
</html>
