
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Le Dernier Secret dâ€™Auguste Le Du</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="theme-color" content="#d9c79a" />
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="header">
        <img src="assets/seal.png" alt="Sceau Auguste Le Du" />
        <div>
          <h1>Le Dernier Secret dâ€™Auguste Le Du</h1>
          <div id="step" class="step">Ã‰tape</div>
        </div>
      </div>
      <hr/>
      <p id="story"></p>
      <div id="lock" class="lock" style="display:none;"></div>

      <div class="codegate">
        <div id="codeMsg" class="small" style="margin-bottom:6px"></div>
        <input id="codeInput" type="text" inputmode="numeric" placeholder="â€¢â€¢â€¢â€¢" />
        <button id="codeBtn">Valider</button>
      </div>

      <div id="postMsg" class="postmsg"></div>

      <div class="tools">
        <button id="scanBtn">ğŸ“· Scanner un QR (camÃ©ra)</button>
        <button id="uploadBtn">ğŸ–¼ï¸ Scanner depuis une photo</button>
        <button id="resetBtn" class="small">â†º RÃ©initialiser la progression</button>
      </div>

      <div class="videoWrap">
        <video id="video" playsinline></video>
        <div class="scanHint">Visez le QRâ€¦</div>
        <button id="stopBtn" class="small" style="margin-top:8px">ArrÃªter la camÃ©ra</button>
      </div>

      <div class="uploadWrap">
        <div class="small">Choisissez une photo nette du QR. Astuce : faites un gros plan bien Ã©clairÃ©.</div>
        <input id="fileInput" type="file" accept="image/*" />
      </div>

      <div class="footer">
        <span class="small">Scannez les QR dans lâ€™ordre. La progression est mÃ©morisÃ©e sur cet appareil.</span>
        <span class="small">Â© Auguste Le Du â€” 1921</span>
      </div>
      <div id="debug" class="debug"></div>
    </div>
  </div>
  <script>
    window.STEP_TEXTS = {"1": "QR1 â€“ Pierre 1921\n\nÂ« Bien le bonjour, Ã©tranger curieux ! Si tu lis ces lignes, câ€™est que tu tâ€™es aventurÃ© sur mes terresâ€¦\nSache que jâ€™ai laissÃ© derriÃ¨re moi un trÃ©sorâ€¦ ou peutâ€‘Ãªtre une malÃ©dictionâ€¦ ou les deux.\n\nPour commencer, cherche la pierre qui porte le chiffre gravÃ© de mon annÃ©e la plus chÃ¨re. Â»", "2": "QR2 â€“ La marmite\n\nÂ« Elle a nourri plus de ventres que le curÃ© nâ€™a donnÃ© de sermons ! Regardeâ€‘la bienâ€¦ mais cherche Ã  voir autrement, comme la chouette sous la lune. Â»", "3": "QR3 â€“ Panier dâ€™Å“ufs\n\nÂ« Ah, la vieille marmiteâ€¦ Ã€ prÃ©sent, cherche lâ€™endroit oÃ¹ la vie commence, protÃ©gÃ©e par une coquille. Â»", "4": "QR4 â€“ Panier dâ€™Å“ufs â†’ Lavoir (Ã‰nigme)\n\nÂ« Mes dames Ã  plumes nâ€™aiment pas les inconnus. Les couleurs te parlent, mais pas comme Ã  lâ€™arcâ€‘enâ€‘ciel.\nCompteâ€‘lesâ€¦ multiplieâ€‘lesâ€¦ et ajoute mille.\n\nLe chiffre final ouvrira ta prochaine porte. Â»\n\nâ¤· Entre le code pour rÃ©vÃ©ler la suite.", "5": "QR5 â€“ Lavoir\n\n(Le message apparaÃ®t aprÃ¨s validation du code Ã  lâ€™Ã©tape 4.)", "6": "QR6 â€“ Abri Ã  bois\n\nÂ« Fais lâ€™inverse : cherche un endroit secâ€¦ oÃ¹ les calories dorment Ã  lâ€™abri de la pluie. Â»", "7": "QR7 â€“ Canne\n\nÂ« VoilÃ  ma vieille canneâ€¦ Elle mâ€™a soutenu dans les champs comme dans les chemins de traverse. Â»", "8": "QR8 â€“ Mur de pierre et trÃ´ne\n\nÂ« Assiedsâ€‘toi donc sur mon fauteuil minÃ©ralâ€¦ moins confortable quâ€™un coussin, mais plus durable. Â»", "9": "QR9 â€“ Trampoline\n\nÂ« Tu veux monter haut ? Alors trouve la chaleur sans feu, celle qui fait lever sans braiseâ€¦ Â»", "10": "QR10 â€“ Four Ã  pain\n\nÂ« Ahâ€¦ le vieux four. Combien de miches, combien de tartesâ€¦ et combien de secrets aâ€‘tâ€‘il cuits en silence ? Â»", "11": "QR11 â€“ Emplacement du trÃ©sor\n\n(Consignes finales : laisser un autre indice, etc.)", "12": "QR12 â€“ Final\n\nÂ« Bravo ! Marque ta victoireâ€¦ et prÃ©pare le terrain pour le prochain aventurier. Â»"};
    window.STEP4_POST = "Bravo, tu as trouvÃ© !\nÃ‰couteâ€‘moi bien : lÃ  oÃ¹ lâ€™eau danse et chante encore, mÃªme par les plus grandes chaleurs, tu trouveras ce que tu cherches.\n\nIci, les secrets flottent comme les feuilles Ã  lâ€™automneâ€¦ Tire sur la corde, mais pas trop fort : jâ€™ai dÃ©jÃ  perdu deux seaux comme Ã§a.";
  </script>
  <script src="app.js"></script>
</body>
</html>
