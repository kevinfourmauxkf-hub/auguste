<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Le Dernier Secret dâ€™Auguste Le Du</title>
  <link rel="stylesheet" href="style.css?v=7.6.1R7" />
  <link rel="stylesheet" href="style-map.css?v=7.6.1R7" />
  <meta name="theme-color" content="#d9c79a" />
</head>
<body onload="loadSounds(); setupUploadScan();">
  <div class="wrap">
    <div class="card">
      <div class="header">
        <img src="assets/seal.png" alt="Sceau" />
        <div>
          <h1>Le Dernier Secret dâ€™Auguste Le Du</h1>
          <div class="step">Ã‰tape <span id="stepNum">â€”</span> / 12</div>
        </div>
      </div>
      <hr/>
      <p id="story">Chargementâ€¦</p>

      <div class="codegate" id="codeGate">
        <label for="codeInput" class="small">Code requis :</label>
        <input id="codeInput" type="text" inputmode="numeric" placeholder="â€¢â€¢â€¢â€¢" maxlength="10" />
        <button onclick="validateCode()">Valider</button>
      </div>

      <div class="cw" id="crossword"></div>

      <div class="caesar" id="caesarBox">
        <div class="cipher">JDPH RI VWRQH</div>
        <input id="caesarInput" placeholder="Texte dÃ©chiffrÃ©" />
        <button onclick="validateCaesar()">Valider</button>
      </div>

      <div id="mapWrap" style="display:none"></div>

      <div class="tools">
        <button id="scanBtn" onclick="startScanner()">ğŸ“· Scanner un QR</button>
        <button id="uploadBtn">ğŸ–¼ï¸ Scanner depuis une photo</button>
        <button id="resetBtn" onclick="localStorage.removeItem('auguste_progress'); location.href='index.html?step=1&v=reset'">â†º RÃ©initialiser</button>
      </div>

      <div class="videoWrap">
        <video id="video" playsinline></video>
        <div class="scanHint">Visez le QRâ€¦</div>
        <button id="stopBtn" disabled>ArrÃªter</button>
      </div>

      <div class="uploadWrap">
        <div class="small">Choisissez une photo nette dâ€™un QR (gros plan, bien Ã©clairÃ©).</div>
        <input id="fileInput" type="file" accept="image/*" />
      </div>

      <div class="footer small" style="margin-top:12px">
        <span>Scannez les QR dans lâ€™ordre. Progression enregistrÃ©e sur cet appareil.</span>
        <span>Â© Auguste Le Du â€” 1921</span>
      </div>
    </div>
  </div>
  <script src="app.js?v=7.6.1R7"></script>
</body>
</html>
